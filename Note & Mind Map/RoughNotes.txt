Find all the domains and the subdomain. Use online tools like Censys and crt.sh
Also use tools like sublist3r.py

Use whois to get the provider(eg, AWS, GOOGLE, etc)

Run nmap on all the domain we got
nmap -F -sV -iL domains.txt -oA results

Look for CNAME domain names
getent hosts test.example.com

DNSCharts
https://dnscharts.hacklikeapornstar.com/

python script for S3 bucket enumeration

import os
from concurrent.futures import ThreadPoolExecutor, as_completed

```
f = open("domains.txt")

def main(line):
	os.system("curl --silent -I -i https://"+line+" | grep AmazonS3")


processes = []
with ThreadPoolExecutor(max_workers=20) as executor:
	for line in f:
		line = line.strip('\r\n')
		processes.append(executor.submit(main, line))

for task in as_completed(processes):
	(task.result())

print("Done")

```

============================================================

How to verify if an account Id is valid for eg arn:aws:::300944606848:

1. Create a dummy role from IAM(using your user's ID)
2. Got to that role and click Trust relationships and click on edit Trust relationships.
3. change the ID to the one you want to verify and click update trust policy
4. It will get updated if the ID is valid

create a dummy role for eunumeration
```
{
  "Version": "2012-10-17",
  "Statement": [
    {
      "Effect": "Allow",
      "Principal": {
        "AWS": "*"
      },
      "Action": "sts:AssumeRole",
      "Condition": {}
    }
  ]
}
```